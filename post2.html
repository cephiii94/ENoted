<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Judul Post</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 15px;
            background-color: #f9f9f9;
        }
        .content {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: relative;
        }
        h1 {
            color: #333;
        }
        /* Style untuk tombol kembali */
        .back-btn {
            margin-top: 10px;
            background: #4CAF50;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: block; /* Default: tombol ditampilkan */
        }
        
        /* Style untuk tombol share */
        .share-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #3b5998;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: block; /* Default: tampilkan tombol di mobile */
            z-index: 90;
        }
        
        /* Style untuk menu share */
        .share-menu {
            position: absolute;
            top: 45px;
            right: 10px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            padding: 10px;
            display: none;
            z-index: 100;
        }
        
        .share-menu a {
            display: block;
            padding: 8px 15px;
            text-decoration: none;
            color: #333;
            border-bottom: 1px solid #eee;
            font-size: 16px; /* Ukuran font yang lebih besar untuk mobile */
        }
        
        .share-menu a:last-child {
            border-bottom: none;
        }
        
        .share-menu a:hover {
            background: #f5f5f5;
        }
        
        /* Tambahkan latar belakang overlay untuk memudahkan menutup menu */
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.3);
            z-index: 80;
            display: none;
        }
    </style>
</head>
<body>
    <div class="content">
        <h2>JUDUL POST</h2>
        
        <!-- Tombol Share -->
        <button class="share-btn" id="shareButton">Bagikan</button>
        
        <!-- Menu Share -->
        <div class="share-menu" id="shareMenu">
            <a href="#" id="whatsappShare">WhatsApp</a>
            <a href="#" id="facebookShare">Facebook</a>
            <a href="#" id="telegramShare">Telegram</a>
            <a href="#" id="copyLinkBtn">Salin Link</a>
        </div>
        
        <!-- Overlay untuk menutup menu -->
        <div class="menu-overlay" id="menuOverlay"></div>
        
        <p>
            Sedekah adalah salah satu amalan mulia yang dianjurkan dalam berbagai ajaran agama dan budaya. Tidak hanya memberikan manfaat bagi penerima, sedekah juga memberikan banyak kebaikan bagi yang memberi. Berikut adalah beberapa manfaat luar biasa dari sedekah yang dapat dirasakan dalam kehidupan
        </p>
        <p><strong>1. Mendatangkan Keberkahan dalam Hidup</strong></p>
        <p>
            Sedekah membuka pintu rezeki dan keberkahan. Saat kita ikhlas berbagi, Allah SWT menjanjikan balasan yang berlipat ganda. Harta yang disedekahkan tidak akan berkurang, justru akan bertambah dengan cara yang tidak terduga.
        </p>
        <p><strong>2. Membersihkan Harta dan Jiwa</strong></p>
        <p>
            Sedekah ibarat penyuci harta. Terkadang, dalam mencari rezeki, tanpa sadar kita mendapatkan keuntungan yang bercampur dengan hal yang kurang baik. Dengan bersedekah, kita membersihkan harta tersebut agar lebih berkah. Selain itu, sedekah juga membersihkan hati dari sifat kikir dan tamak.
        </p>
        <p><strong>3. Meningkatkan Rasa Empati dan Kepedulian Sosial</strong></p>
        <p>
            Ketika kita bersedekah, kita belajar memahami kesulitan orang lain. Ini membantu menumbuhkan rasa empati dan kepedulian sosial, sehingga kita lebih peka terhadap kebutuhan sesama.
        </p>
        <!-- Konten post lainnya -->
        
        <button class="back-btn" id="backButton" onclick="goBack()">Kembali</button>
    </div>

    <script>
        // Mendapatkan referensi elemen
        const shareButton = document.getElementById('shareButton');
        const shareMenu = document.getElementById('shareMenu');
        const menuOverlay = document.getElementById('menuOverlay');
        const backButton = document.getElementById('backButton');
        const whatsappShare = document.getElementById('whatsappShare');
        const facebookShare = document.getElementById('facebookShare');
        const telegramShare = document.getElementById('telegramShare');
        const copyLinkBtn = document.getElementById('copyLinkBtn');
        
        function goBack() {
            window.location.href = "index.html";
        }

        // Deteksi iframe dengan cara yang lebih langsung
        function checkIfIframe() {
            try {
                // Jika halaman berada dalam iframe, maka window.self !== window.top
                return window.self !== window.top;
            } catch (e) {
                // Jika terjadi error, kemungkinan karena masalah keamanan cross-origin
                // dalam hal ini, kemungkinan besar halaman berada dalam iframe
                return true;
            }
        }
        
        // Deteksi apakah pengguna membuka halaman dari perangkat mobile
        function isMobileDevice() {
            return (typeof window.orientation !== "undefined") || 
                   (navigator.userAgent.indexOf('IEMobile') !== -1) ||
                   (navigator.userAgent.indexOf('Android') !== -1) ||
                   (navigator.userAgent.indexOf('iPhone') !== -1) ||
                   (navigator.userAgent.indexOf('iPad') !== -1);
        }
        
        // Fungsi untuk menampilkan menu share
        function showShareMenu() {
            shareMenu.style.display = 'block';
            menuOverlay.style.display = 'block';
        }
        
        // Fungsi untuk menyembunyikan menu share
        function hideShareMenu() {
            shareMenu.style.display = 'none';
            menuOverlay.style.display = 'none';
        }
        
        // Fungsi berbagi via WhatsApp
        function shareViaWhatsApp() {
            var url = encodeURIComponent(window.location.href);
            var text = encodeURIComponent("Manfaat Sedekah: Keajaiban Berbagi dalam Kehidupan");
            window.open('https://api.whatsapp.com/send?text=' + text + ' ' + url, '_blank');
            hideShareMenu();
        }
        
        // Fungsi berbagi via Facebook
        function shareViaFacebook() {
            var url = encodeURIComponent(window.location.href);
            window.open('https://www.facebook.com/sharer/sharer.php?u=' + url, '_blank');
            hideShareMenu();
        }
        
        // Fungsi berbagi via Telegram
        function shareViaTelegram() {
            var url = encodeURIComponent(window.location.href);
            var text = encodeURIComponent("Manfaat Sedekah: Keajaiban Berbagi dalam Kehidupan");
            window.open('https://t.me/share/url?url=' + url + '&text=' + text, '_blank');
            hideShareMenu();
        }
        
        // Fungsi untuk menyalin link
        function copyLink() {
            try {
                // Metode modern menggunakan Clipboard API
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(window.location.href)
                        .then(() => {
                            alert("Link telah disalin!");
                        })
                        .catch((err) => {
                            // Jika gagal, gunakan metode lama
                            fallbackCopyLink();
                        });
                } else {
                    // Jika Clipboard API tidak tersedia, gunakan metode lama
                    fallbackCopyLink();
                }
            } catch (err) {
                fallbackCopyLink();
            }
            
            hideShareMenu();
        }
        
        // Metode cadangan untuk menyalin link
        function fallbackCopyLink() {
            const dummy = document.createElement("textarea");
            document.body.appendChild(dummy);
            dummy.value = window.location.href;
            dummy.select();
            document.execCommand("copy");
            document.body.removeChild(dummy);
            alert("Link telah disalin!");
        }

        // Cek saat halaman dimuat
        window.addEventListener('DOMContentLoaded', function() {
            // Jika dalam iframe DAN bukan perangkat mobile, sembunyikan tombol kembali dan share
            if (checkIfIframe() && !isMobileDevice()) {
                backButton.style.display = "none";
                shareButton.style.display = "none";
            } else {
                // Pada mobile selalu tampilkan tombol kembali dan share
                // atau jika halaman dibuka langsung (bukan dalam iframe)
                backButton.style.display = "block";
                shareButton.style.display = "block";
            }
            
            // Event listener untuk tombol share
            shareButton.addEventListener('touchstart', function(e) {
                e.preventDefault();
                showShareMenu();
            });
            
            shareButton.addEventListener('click', function(e) {
                e.preventDefault();
                showShareMenu();
            });
            
            // Event listener untuk menutup menu saat overlay diklik
            menuOverlay.addEventListener('touchstart', function(e) {
                e.preventDefault();
                hideShareMenu();
            });
            
            menuOverlay.addEventListener('click', function(e) {
                e.preventDefault();
                hideShareMenu();
            });
            
            // Event listener untuk opsi share
            whatsappShare.addEventListener('touchstart', function(e) {
                e.preventDefault();
                shareViaWhatsApp();
            });
            
            whatsappShare.addEventListener('click', function(e) {
                e.preventDefault();
                shareViaWhatsApp();
            });
            
            facebookShare.addEventListener('touchstart', function(e) {
                e.preventDefault();
                shareViaFacebook();
            });
            
            facebookShare.addEventListener('click', function(e) {
                e.preventDefault();
                shareViaFacebook();
            });
            
            telegramShare.addEventListener('touchstart', function(e) {
                e.preventDefault();
                shareViaTelegram();
            });
            
            telegramShare.addEventListener('click', function(e) {
                e.preventDefault();
                shareViaTelegram();
            });
            
            copyLinkBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                copyLink();
            });
            
            copyLinkBtn.addEventListener('click', function(e) {
                e.preventDefault();
                copyLink();
            });
        });
    </script>
</body>
</html>